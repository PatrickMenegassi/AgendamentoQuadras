{% extends 'base.html' %}
{% block content %}

<h1 class="mb-4">Lista de Clientes</h1>
<a href="{% url 'home' %}" class="btn btn-info">Voltar ao menu</a>

<form method="get" class="row g-3 mb-3">
  <div class="col-md-3">
    <label for="nome" class="form-label">Nome</label>
    <input type="text" id="nome" name="nome" class="form-control" value="{{ request.GET.nome }}">
  </div>

  <div class="col-md-3">
    <label for="telefone" class="form-label">Telefone</label>
    <input type="text" id="telefone" name="telefone" class="form-control" value="{{ request.GET.telefone }}">
  </div>

  <div class="col-md-3">
    <label for="data_nascimento" class="form-label">Data de Nascimento</label>
    <input type="date" id="data_nascimento" name="data_nascimento" class="form-control" value="{{ request.GET.data_nascimento }}">
  </div>

  <div class="col-md-3 d-flex align-items-end">
    <button type="submit" class="btn btn-primary me-2">Buscar</button>
    <a href="{% url 'lista_clientes' %}" class="btn btn-secondary">Limpar</a>
  </div>
</form>

<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>Nome</th>
      <th>Telefone</th>
      <th>Email</th>
      <th>Data Nascimento</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for cliente in clientes %}
    <tr>
      <td>{{ cliente.nome }}</td>
      <td>{{ cliente.telefone_formatado }}</td>
      <td>{{ cliente.email|default:"-" }}</td>
      <td>{{ cliente.data_nascimento_formatada }}</td>
      <td>
        <a href="{% url 'editar_cliente' cliente.id %}" class="btn btn-sm btn-warning">Editar</a>
        <a href="{% url 'excluir_cliente' cliente.id %}" class="btn btn-sm btn-danger"
           onclick="return confirm('Tem certeza?')">Excluir</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center">Nenhum cliente cadastrado.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
